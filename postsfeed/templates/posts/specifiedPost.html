{% extends 'base.html' %}

{% block title %}{{ post.title }}{% endblock %}
{% block content %}
  <div>
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
    <em>{{ post.publication_date }}</em>
  </div>
  <hr>
  {% if user.is_authenticated %}
    <form action="{% url 'posts:leaveComment' post.id %}" method="POST">
      {% csrf_token %}
      <input 
        type="text"
        name="author-name"
        autocomplete="off"
        value="{{ user.username }}"
        style="display: none;"
      />
      <br>
      <textarea name="comment" placeholder="Write a comment here" cols="30" rows="10"></textarea>
      <br>
      <button type="submit">Leave comment</button>
    </form>
  {% endif %}
  <hr>
    {% if comments %}
      {% for comment in comments %}
        <div>
          <b>{{ comment.author_name }}</b>
          <p>{{ comment.text }}</p>
          <em>{{ comment.publication_date }}</em>
        </div>
      {% endfor %}
    {% else %}
      <div>There are no comments yet! ðŸ˜Ÿ</div>
    {% endif %}
  <hr>
{% endblock %}